"use strict";var c=Object.defineProperty;var m=(s,e,t)=>e in s?c(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var u=(s,e,t)=>(m(s,typeof e!="symbol"?e+"":e,t),t);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const o=require("fourdom");var h=(s=>(s.getContainerElError="Can not find container element.",s.getQuickNextElError="Can not find quick next element.",s.getQuickPrevElError="Can not find quick prev element.",s))(h||{}),n=(s=>(s.containerClassName="pagination-bar-container",s.pagerWrapperClassName="pagination-bar__pager",s.pagerItemClassName="pagination-bar__pager__number",s.prevButtonClassName="pagination-bar__prev",s.nextButtonClassName="pagination-bar__next",s.totalClassName="pagination-bar__total",s.jumperClassName="pagination-bar__jumper",s.sizesClassName="pagination-bar__sizes",s.themeClassNamePrefix="theme--",s))(n||{});const d='<svg xmlns="http://www.w3.org/2000/svg" width="1em" class="icon" viewBox="0 0 1024 1024" fill="#707070" style="--svg-origin-width:200;--svg-origin-height:200;--svg-origin-width--with-unit:200px;--svg-origin-height--with-unit:200px;" data-svg-origin-width="200" data-svg-origin-height="200" font-size="200"><path d="M650.721 191.69c-8.782 0-17.565 3.237-24.268 9.709L328.968 488.573c-13.408 12.933-13.408 33.923 0 46.856L626.454 822.6c13.408 12.944 35.13 12.944 48.538 0 13.409-12.932 13.409-33.923 0-46.855L401.775 512 674.99 248.253c13.409-12.932 13.409-33.923 0-46.855-6.704-6.471-15.486-9.708-24.269-9.707z"/></svg>',b='<svg xmlns="http://www.w3.org/2000/svg" width="1em" class="icon" viewBox="0 0 1024 1024" fill="#707070" style="--svg-origin-width:200;--svg-origin-height:200;--svg-origin-width--with-unit:200px;--svg-origin-height--with-unit:200px;" data-svg-origin-width="200" data-svg-origin-height="200" font-size="200"><path d="M372.68 191.69c8.782 0 17.565 3.237 24.269 9.709l297.484 287.175c13.408 12.933 13.408 33.923 0 46.856L396.948 822.602c-13.409 12.944-35.13 12.944-48.538 0-13.408-12.932-13.408-33.923 0-46.855l273.216-263.745L348.41 248.253c-13.408-12.932-13.408-33.923 0-46.855 6.704-6.471 15.487-9.708 24.269-9.707z"/></svg>',P='<svg xmlns="http://www.w3.org/2000/svg" width="1em" class="icon" viewBox="0 0 1024 1024" fill="#515151" style="--svg-origin-width:200;--svg-origin-height:200;--svg-origin-width--with-unit:200px;--svg-origin-height--with-unit:200px;" data-svg-origin-width="200" data-svg-origin-height="200" font-size="200"><path d="M197.031 417.342c-52.237 0-94.615 42.398-94.615 94.638 0 52.256 42.378 94.634 94.615 94.634 52.24 0 94.637-42.378 94.637-94.634 0-52.24-42.397-94.638-94.637-94.638zM512 417.342c-52.259 0-94.615 42.398-94.615 94.638 0 52.256 42.356 94.634 94.614 94.634 52.238 0 94.595-42.378 94.595-94.634 0-52.24-42.357-94.638-94.595-94.638zM826.926 417.342c-52.198 0-94.594 42.398-94.594 94.638 0 52.256 42.397 94.634 94.594 94.634 52.26 0 94.657-42.378 94.657-94.634 0-52.24-42.398-94.638-94.657-94.638z"/></svg>',v='<svg xmlns="http://www.w3.org/2000/svg" width="1em" class="icon" viewBox="0 0 1024 1024" fill="#515151" style="--svg-origin-width:200;--svg-origin-height:200;--svg-origin-width--with-unit:200px;--svg-origin-height--with-unit:200px;" data-svg-origin-width="200" data-svg-origin-height="200" font-size="200"><path d="M531.2 889.6c-17.067 0-32-14.933-32-32 0-8.533 4.267-17.067 8.533-21.333L832 512 509.867 187.733c-12.8-12.8-12.8-32-2.134-44.8s32-12.8 44.8-2.133c0 0 2.134 0 2.134 2.133l330.666 332.8c21.334 21.334 21.334 55.467 0 74.667L554.667 881.067c-6.4 6.4-14.934 8.533-23.467 8.533zm309.333-369.067z"/><path d="M155.733 889.6c-17.066 0-32-14.933-32-32 0-8.533 4.267-17.067 8.534-21.333L456.533 512 132.267 187.733c-10.667-12.8-10.667-32 2.133-44.8 12.8-10.666 32-10.666 42.667 0l330.666 332.8c21.334 21.334 21.334 55.467 0 74.667L179.2 881.067c-6.4 6.4-14.933 8.533-23.467 8.533zm309.334-369.067z"/></svg>';class p{constructor(e){u(this,"options",{container:"#pagination-bar-container",theme:"material",firstPageNumber:1,pagerCount:7,currentPage:1,pageSize:10,total:0,layout:"prev,pager,next",pageSizes:[10,20,30,40,50,100],sizesOptionLabel:e=>`${e}/page`,prevText:"",nextText:"",jumperPrefixText:"Go to",jumperSuffixText:"",totalPrefixText:"Total",totalSuffixText:"",onCurrentPageChange:()=>{},onPageSizeChange:()=>{},disabled:!1,background:!1,hideOnSinglePage:!1});u(this,"currentJumpNumber","");u(this,"selectedPageSize",this.options.pageSize);this.options=Object.assign(this.options,e),this.selectedPageSize=this.options.pageSize,this.pagerListener=this.pagerListener.bind(this),this.prevBtnListener=this.prevBtnListener.bind(this),this.nextBtnListener=this.nextBtnListener.bind(this),this.jumperListener=this.jumperListener.bind(this),this.sizesListener=this.sizesListener.bind(this),this.quickNextListener=this.quickNextListener.bind(this),this.quickPrevListener=this.quickPrevListener.bind(this);const t=this.getContainerEl();o.addClass(t,n.containerClassName),o.addClass(t,`${n.themeClassNamePrefix}${this.options.theme}`),this.options.disabled&&o.addClass(t,"disabled"),this.render()}setCurrentPage(e,t=!0){var r;let i=e;return i<this.options.firstPageNumber?i=this.options.firstPageNumber:i>this.lastPageNumber&&(i=this.lastPageNumber),this.options.currentPage=i,(r=this.options)==null||r.onCurrentPageChange(this.options.currentPage),t&&this.render(),i}setPageSize(e,t=!0){var r;let i=e;return i>this.options.total&&(i=this.options.total),this.selectedPageSize=i,this.options.pageSize=i,(r=this.options)==null||r.onPageSizeChange(this.options.pageSize),t&&this.render(),i}setTotal(e,t=!0){this.options.total=e||0,t&&this.render()}setOptions(e,t=!1){this.options=Object.assign(this.options,e),t&&this.render()}setTheme(e){const t=this.getContainerEl();for(const i of t.classList.values())i.startsWith(n.themeClassNamePrefix)&&o.removeClass(t,i);o.addClass(t,`${n.themeClassNamePrefix}${e}`)}disabled(e,t=!0){const i=this.getContainerEl();this.options.disabled=e,e?o.addClass(i,"disabled"):o.removeClass(i,"disabled"),t&&this.render()}get pageCount(){return Math.ceil(this.options.total/this.options.pageSize)}get lastPageNumber(){return this.pageCount}get mainPagerCount(){const e=this.options.pagerCount-2;return e<=0?0:e}get mainPagerGap(){return Math.floor(this.mainPagerCount/2)}get mainPagerStart(){let e=this.mainPagerGap;const t=this.lastPageNumber-this.options.currentPage;t<=this.mainPagerGap&&(e+=this.mainPagerGap-t+1);const i=this.options.currentPage-e;return i<this.options.firstPageNumber?this.options.firstPageNumber:i}get mainPagerEnd(){let e=this.mainPagerCount%2===0?this.mainPagerGap-1:this.mainPagerGap;const t=this.options.currentPage-1;t<=this.mainPagerGap&&(e+=this.mainPagerGap-t+1);const i=this.options.currentPage+e;return i>this.pageCount?this.pageCount:i}get mainPager(){const e=[];for(let t=this.mainPagerStart;t<=this.mainPagerEnd;t++)e.push({pageNumber:t,type:"main"});return e}get leftPager(){const e=[],t=this.mainPager[0];return t&&t.pageNumber!==this.options.firstPageNumber&&(e.push({pageNumber:this.options.firstPageNumber,type:"first-page"}),this.pageCount>this.options.pagerCount&&typeof t.pageNumber=="number"&&t.pageNumber>2&&e.push({pageNumber:null,type:"prev-ellipsis"})),e}get rightPager(){const e=[],t=this.mainPager[this.mainPager.length-1];return t&&t.pageNumber!==this.pageCount&&(e.unshift({pageNumber:this.pageCount,type:"last-page"}),this.pageCount>this.options.pagerCount&&typeof t.pageNumber=="number"&&t.pageNumber<this.pageCount-1&&e.unshift({pageNumber:null,type:"next-ellipsis"})),e}get finalPager(){return this.leftPager.concat(this.mainPager,this.rightPager)}get disabledAttrString(){return this.options.disabled?'disabled="disabled"':""}getLayout(){return typeof this.options.layout=="string"?this.options.layout.split(",").map(e=>e.trim()):Array.isArray(this.options.layout)?this.options.layout:[]}getLayoutHTML(){return this.getLayout().reduce((e,t)=>(t==="pager"?e+=this.generatePager():t==="prev"?e+=this.generatePrev():t==="next"?e+=this.generateNext():t==="jumper"?e+=this.generateJumper():t==="total"?e+=this.generateTotal():t==="sizes"&&(e+=this.generateSizes()),e),"")}getContainerEl(){if(typeof this.options.container=="string"){const e=document.querySelector(this.options.container);if(!e)throw new Error(h.getContainerElError);return e}return this.options.container}isPagerNumberType(e){return e&&!["prev-ellipsis","next-ellipsis"].includes(e)}isBackground(){return this.options.background?"is-background":""}generatePager(){const e=this.finalPager.reduce((t,i)=>{const r=`
        <span class="pager-quick-btn-icon pager-quick-btn-icon--more ${i.type}">${P}</span>
        <span class="pager-quick-btn-icon pager-quick-btn-icon--arrow ${i.type}">${v}</span>
      `,a=this.isPagerNumberType(i.type)?i.pageNumber:r,l=this.options.currentPage===i.pageNumber?"active":"",g=this.isPagerNumberType(i.type)?"pager-number":"pager-quick-btn";return t+=`<li class="${n.pagerItemClassName} ${l} ${g}" 
        data-number="${i.pageNumber}" data-type="${i.type}" role="${g}">
        ${a}
      </li>`,t},"");return`<ul class="${n.pagerWrapperClassName} ${this.isBackground()}">${e}</ul>`}generatePrev(){const e=this.options.currentPage<=this.options.firstPageNumber||this.options.disabled?'disabled="disabled"':"",t=e?"disabled":"",i=this.options.prevText?this.options.prevText:d;return`<button type="button" class="${n.prevButtonClassName} ${t} ${this.isBackground()}" ${e} role="prev-btn">${i}</button>`}generateNext(){const e=this.options.currentPage>=this.lastPageNumber||this.options.disabled?'disabled="disabled"':"",t=e?"disabled":"",i=this.options.nextText?this.options.nextText:b;return`<button type="button" class="${n.nextButtonClassName} ${t} ${this.isBackground()}" ${e} role="next-btn">${i}</button>`}generateSizes(){const e=this.options.pageSizes.map(t=>{const i=this.selectedPageSize===t?"selected":"";return`<option value="${t}" ${i}>${this.options.sizesOptionLabel(t)}</option>`}).join("");return`<div class="${n.sizesClassName}">
      <select class="${n.sizesClassName}__select" ${this.disabledAttrString}>${e}</select>
    </div>`}generateJumper(){return`<div class="${n.jumperClassName}">
      <span>${this.options.jumperPrefixText}</span>
      <div class="${n.jumperClassName}__input">
        <input ${this.disabledAttrString} type="number" value="${this.currentJumpNumber}"  autocomplete="off" min="${this.options.firstPageNumber}" max="${this.lastPageNumber}" class="${n.jumperClassName}__input-inner" />
      </div>
      <span>${this.options.jumperSuffixText}</span>
    </div>`}generateTotal(){const e=`${this.options.totalPrefixText} ${this.options.total} ${this.options.totalSuffixText}`.trim();return`<span class="${n.totalClassName}">${e}</span>`}getPagerItemDataset(e){return e.dataset}pagerListener(e){if(this.options.disabled)return;const t=e.target;if(t.getAttribute("role")==="pager-number"){const r=this.getPagerItemDataset(t),a=Number(r.number);this.setCurrentPage(a)}}prevBtnListener(){this.options.disabled||this.options.currentPage>1&&this.setCurrentPage(this.options.currentPage-1)}nextBtnListener(){this.options.disabled||this.options.currentPage<this.lastPageNumber&&this.setCurrentPage(this.options.currentPage+1)}jumperListener(e){if(this.options.disabled)return;const t=e.target;if(!t.value){this.currentJumpNumber="";return}this.currentJumpNumber=this.setCurrentPage(Number(t.value),!1),this.render()}sizesListener(e){if(this.options.disabled)return;const t=e.target;if(!t.value){this.selectedPageSize=this.options.pageSize;return}this.selectedPageSize=this.setPageSize(Number(t.value),!1),this.options.currentPage>this.lastPageNumber&&this.setCurrentPage(this.lastPageNumber,!1),this.render()}quickNextListener(){this.options.disabled||this.setCurrentPage(this.options.currentPage+this.mainPagerCount)}quickPrevListener(){this.options.disabled||this.setCurrentPage(this.options.currentPage-this.mainPagerCount)}getQuickNextEl(){return this.getContainerEl().querySelector(`.${n.pagerWrapperClassName} .${n.pagerItemClassName}[data-type="next-ellipsis"]`)}getQuickPrevEl(){return this.getContainerEl().querySelector(`.${n.pagerWrapperClassName} .${n.pagerItemClassName}[data-type="prev-ellipsis"]`)}registerListeners(){var t,i,r,a,l,g;this.removeListeners();const e=this.getContainerEl();e.addEventListener("click",this.pagerListener),(t=e.querySelector('button[role="prev-btn"]'))==null||t.addEventListener("click",this.prevBtnListener),(i=e.querySelector('button[role="next-btn"]'))==null||i.addEventListener("click",this.nextBtnListener),(r=e.querySelector(`.${n.jumperClassName}__input-inner`))==null||r.addEventListener("change",this.jumperListener),(a=e.querySelector(`.${n.sizesClassName}__select`))==null||a.addEventListener("change",this.sizesListener),(l=this.getQuickNextEl())==null||l.addEventListener("click",this.quickNextListener),(g=this.getQuickPrevEl())==null||g.addEventListener("click",this.quickPrevListener)}removeListeners(){var t,i,r,a,l,g;const e=this.getContainerEl();e.removeEventListener("click",this.pagerListener),(t=e.querySelector('button[role="prev-btn"]'))==null||t.removeEventListener("click",this.prevBtnListener),(i=e.querySelector('button[role="next-btn"]'))==null||i.removeEventListener("click",this.nextBtnListener),(r=e.querySelector(`.${n.jumperClassName}__input-inner`))==null||r.removeEventListener("change",this.jumperListener),(a=e.querySelector(`.${n.sizesClassName}__select`))==null||a.removeEventListener("change",this.sizesListener),(l=this.getQuickNextEl())==null||l.removeEventListener("click",this.quickNextListener),(g=this.getQuickPrevEl())==null||g.removeEventListener("click",this.quickPrevListener)}render(){const e=this.getContainerEl();this.options.hideOnSinglePage&&this.options.total===1?o.css(e,{display:"none"}):o.css(e,{display:"flex"}),e.innerHTML=this.getLayoutHTML(),this.registerListeners()}destory(){this.removeListeners()}}const f=s=>new p(s);exports.PaginationBar=p;exports.createPaginationBar=f;
