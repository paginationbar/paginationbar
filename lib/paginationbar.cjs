"use strict";var l=Object.defineProperty;var c=(i,e,t)=>e in i?l(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var o=(i,e,t)=>(c(i,typeof e!="symbol"?e+"":e,t),t);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});var u=(i=>(i.getContainerElError="Can not find container element.",i))(u||{}),n=(i=>(i.containerClassName="pagination-bar-container",i.pagerWrapperClassName="pagination-bar__pager",i.pagerItemClassName="pagination-bar__pager__number",i.prevButtonClassName="pagination-bar__prev",i.nextButtonClassName="pagination-bar__next",i.totalClassName="pagination-bar__total",i.jumperClassName="pagination-bar__jumper",i.sizesClassName="pagination-bar__sizes",i.themeClassNamePrefix="theme--",i))(n||{});function g(i,e){const t=typeof e=="string"?[e]:e;i.classList.add(...t)}function m(i,e){const t=typeof e=="string"?[e]:e;i.classList.remove(...t)}const b='<svg xmlns="http://www.w3.org/2000/svg" width="1em" class="icon" viewBox="0 0 1024 1024" fill="#707070" style="--svg-origin-width:200;--svg-origin-height:200;--svg-origin-width--with-unit:200px;--svg-origin-height--with-unit:200px;" data-svg-origin-width="200" data-svg-origin-height="200" font-size="200"><path d="M650.721 191.69c-8.782 0-17.565 3.237-24.268 9.709L328.968 488.573c-13.408 12.933-13.408 33.923 0 46.856L626.454 822.6c13.408 12.944 35.13 12.944 48.538 0 13.409-12.932 13.409-33.923 0-46.855L401.775 512 674.99 248.253c13.409-12.932 13.409-33.923 0-46.855-6.704-6.471-15.486-9.708-24.269-9.707z"/></svg>',P='<svg xmlns="http://www.w3.org/2000/svg" width="1em" class="icon" viewBox="0 0 1024 1024" fill="#707070" style="--svg-origin-width:200;--svg-origin-height:200;--svg-origin-width--with-unit:200px;--svg-origin-height--with-unit:200px;" data-svg-origin-width="200" data-svg-origin-height="200" font-size="200"><path d="M372.68 191.69c8.782 0 17.565 3.237 24.269 9.709l297.484 287.175c13.408 12.933 13.408 33.923 0 46.856L396.948 822.602c-13.409 12.944-35.13 12.944-48.538 0-13.408-12.932-13.408-33.923 0-46.855l273.216-263.745L348.41 248.253c-13.408-12.932-13.408-33.923 0-46.855 6.704-6.471 15.487-9.708 24.269-9.707z"/></svg>',d='<svg xmlns="http://www.w3.org/2000/svg" width="1em" class="icon" viewBox="0 0 1024 1024" fill="#515151" style="--svg-origin-width:200;--svg-origin-height:200;--svg-origin-width--with-unit:200px;--svg-origin-height--with-unit:200px;" data-svg-origin-width="200" data-svg-origin-height="200" font-size="200"><path d="M197.031 417.342c-52.237 0-94.615 42.398-94.615 94.638 0 52.256 42.378 94.634 94.615 94.634 52.24 0 94.637-42.378 94.637-94.634 0-52.24-42.397-94.638-94.637-94.638zM512 417.342c-52.259 0-94.615 42.398-94.615 94.638 0 52.256 42.356 94.634 94.614 94.634 52.238 0 94.595-42.378 94.595-94.634 0-52.24-42.357-94.638-94.595-94.638zM826.926 417.342c-52.198 0-94.594 42.398-94.594 94.638 0 52.256 42.397 94.634 94.594 94.634 52.26 0 94.657-42.378 94.657-94.634 0-52.24-42.398-94.638-94.657-94.638z"/></svg>';class h{constructor(e){o(this,"options",{container:"#pagination-bar-container",theme:"material",firstPageNumber:1,pagerCount:7,currentPage:1,pageSize:10,total:0,layout:"prev,pager,next",pageSizes:[10,20,30,40,50,100],sizesOptionLabel:e=>`${e}/page`,prevText:"",nextText:"",jumperPrefixText:"Go to",jumperSuffixText:"",totalPrefixText:"Total",totalSuffixText:"",onCurrentPageChange:()=>{},onPageSizeChange:()=>{}});o(this,"currentJumpNumber","");o(this,"selectedPageSize",this.options.pageSize);this.options=Object.assign(this.options,e),this.selectedPageSize=this.options.pageSize,this.pagerListener=this.pagerListener.bind(this),this.prevBtnListener=this.prevBtnListener.bind(this),this.nextBtnListener=this.nextBtnListener.bind(this),this.jumperListener=this.jumperListener.bind(this),this.sizesListener=this.sizesListener.bind(this);const t=this.getContainerEl();g(t,n.containerClassName),g(t,`${n.themeClassNamePrefix}${this.options.theme}`),this.render()}setCurrentPage(e,t=!0){var r;let s=e;return s<this.options.firstPageNumber?s=this.options.firstPageNumber:s>this.lastPageNumber&&(s=this.lastPageNumber),this.options.currentPage=s,(r=this.options)==null||r.onCurrentPageChange(this.options.currentPage),t&&this.render(),s}setPageSize(e,t=!0){var r;let s=e;return s>this.options.total&&(s=this.options.total),this.selectedPageSize=s,this.options.pageSize=s,(r=this.options)==null||r.onPageSizeChange(this.options.pageSize),t&&this.render(),s}setTotal(e,t=!0){this.options.total=e||0,t&&this.render()}setOptions(e,t=!1){this.options=Object.assign(this.options,e),t&&this.render()}setTheme(e){const t=this.getContainerEl();for(const s of t.classList.values())s.startsWith(n.themeClassNamePrefix)&&m(t,s);g(t,`${n.themeClassNamePrefix}${e}`)}get pageCount(){return Math.ceil(this.options.total/this.options.pageSize)}get lastPageNumber(){return this.pageCount}get mainPagerCount(){const e=this.options.pagerCount-2;return e<=0?0:e}get mainPagerGap(){return Math.floor(this.mainPagerCount/2)}get mainPagerStart(){let e=this.mainPagerGap;const t=this.lastPageNumber-this.options.currentPage;t<=this.mainPagerGap&&(e+=this.mainPagerGap-t+1);const s=this.options.currentPage-e;return s<this.options.firstPageNumber?this.options.firstPageNumber:s}get mainPagerEnd(){let e=this.mainPagerCount%2===0?this.mainPagerGap-1:this.mainPagerGap;const t=this.options.currentPage-1;t<=this.mainPagerGap&&(e+=this.mainPagerGap-t+1);const s=this.options.currentPage+e;return s>this.pageCount?this.pageCount:s}get mainPager(){const e=[];for(let t=this.mainPagerStart;t<=this.mainPagerEnd;t++)e.push({pageNumber:t,type:"main"});return e}get leftPager(){const e=[],t=this.mainPager[0];return t&&t.pageNumber!==this.options.firstPageNumber&&(e.push({pageNumber:this.options.firstPageNumber,type:"first-page"}),this.pageCount>this.options.pagerCount&&typeof t.pageNumber=="number"&&t.pageNumber>2&&e.push({pageNumber:null,type:"prev-ellipsis"})),e}get rightPager(){const e=[],t=this.mainPager[this.mainPager.length-1];return t&&t.pageNumber!==this.pageCount&&(e.unshift({pageNumber:this.pageCount,type:"last-page"}),this.pageCount>this.options.pagerCount&&typeof t.pageNumber=="number"&&t.pageNumber<this.pageCount-1&&e.unshift({pageNumber:null,type:"next-ellipsis"})),e}get finalPager(){return this.leftPager.concat(this.mainPager,this.rightPager)}getLayout(){return typeof this.options.layout=="string"?this.options.layout.split(",").map(e=>e.trim()):Array.isArray(this.options.layout)?this.options.layout:[]}getLayoutHTML(){return this.getLayout().reduce((e,t)=>(t==="pager"?e+=this.generatePager():t==="prev"?e+=this.generatePrev():t==="next"?e+=this.generateNext():t==="jumper"?e+=this.generateJumper():t==="total"?e+=this.generateTotal():t==="sizes"&&(e+=this.generateSizes()),e),"")}getContainerEl(){if(typeof this.options.container=="string"){const e=document.querySelector(this.options.container);if(!e)throw new Error(u.getContainerElError);return e}return this.options.container}isPagerNumberType(e){return e&&!["prev-ellipsis","next-ellipsis"].includes(e)}generatePager(){const e=this.finalPager.reduce((t,s)=>{const r=this.isPagerNumberType(s.type)?s.pageNumber:d,a=this.options.currentPage===s.pageNumber?"active":"",p=this.isPagerNumberType(s.type)?"pager-number":"pager-quick-btn";return t+=`<li class="${n.pagerItemClassName} ${a} ${p}" data-number="${s.pageNumber}" data-type="${s.type}" role="${p}">${r}</li>`,t},"");return`<ul class="${n.pagerWrapperClassName}">${e}</ul>`}generatePrev(){const e=this.options.currentPage<=this.options.firstPageNumber?'disabled="disabled"':"",t=e?"disabled":"",s=this.options.prevText?this.options.prevText:b;return`<button type="button" class="${n.prevButtonClassName} ${t}" ${e} role="prev-btn">${s}</button>`}generateNext(){const e=this.options.currentPage>=this.lastPageNumber?'disabled="disabled"':"",t=e?"disabled":"",s=this.options.nextText?this.options.nextText:P;return`<button type="button" class="${n.nextButtonClassName} ${t}" ${e} role="next-btn">${s}</button>`}generateSizes(){const e=this.options.pageSizes.map(t=>{const s=this.selectedPageSize===t?"selected":"";return`<option value="${t}" ${s}>${this.options.sizesOptionLabel(t)}</option>`}).join("");return`<div class="${n.sizesClassName}">
      <select class="${n.sizesClassName}__select">${e}</select>
    </div>`}generateJumper(){return`<div class="${n.jumperClassName}">
      <span>${this.options.jumperPrefixText}</span>
      <div class="${n.jumperClassName}__input">
        <input type="number" value="${this.currentJumpNumber}"  autocomplete="off" min="${this.options.firstPageNumber}" max="${this.lastPageNumber}" class="${n.jumperClassName}__input-inner" />
      </div>
      <span>${this.options.jumperSuffixText}</span>
    </div>`}generateTotal(){const e=`${this.options.totalPrefixText} ${this.options.total} ${this.options.totalSuffixText}`.trim();return`<span class="${n.totalClassName}">${e}</span>`}getPagerItemDataset(e){return e.dataset}pagerListener(e){const t=e.target;if(t.getAttribute("role")==="pager-number"){const r=this.getPagerItemDataset(t),a=Number(r.number);this.setCurrentPage(a)}}prevBtnListener(){this.options.currentPage>1&&this.setCurrentPage(this.options.currentPage-1)}nextBtnListener(){this.options.currentPage<this.lastPageNumber&&this.setCurrentPage(this.options.currentPage+1)}jumperListener(e){const t=e.target;if(!t.value){this.currentJumpNumber="";return}this.currentJumpNumber=this.setCurrentPage(Number(t.value),!1),this.render()}sizesListener(e){const t=e.target;if(!t.value){this.selectedPageSize=this.options.pageSize;return}this.selectedPageSize=this.setPageSize(Number(t.value),!1),this.render()}registerListeners(){var t,s,r,a;this.removeListeners();const e=this.getContainerEl();e.addEventListener("click",this.pagerListener),(t=e.querySelector('button[role="prev-btn"]'))==null||t.addEventListener("click",this.prevBtnListener),(s=e.querySelector('button[role="next-btn"]'))==null||s.addEventListener("click",this.nextBtnListener),(r=e.querySelector(`.${n.jumperClassName}__input-inner`))==null||r.addEventListener("change",this.jumperListener),(a=e.querySelector(`.${n.sizesClassName}__select`))==null||a.addEventListener("change",this.sizesListener)}removeListeners(){var t,s,r,a;const e=this.getContainerEl();e.removeEventListener("click",this.pagerListener),(t=e.querySelector('button[role="prev-btn"]'))==null||t.removeEventListener("click",this.prevBtnListener),(s=e.querySelector('button[role="next-btn"]'))==null||s.removeEventListener("click",this.nextBtnListener),(r=e.querySelector(`.${n.jumperClassName}__input-inner`))==null||r.removeEventListener("change",this.jumperListener),(a=e.querySelector(`.${n.sizesClassName}__select`))==null||a.removeEventListener("change",this.sizesListener)}render(){const e=this.getContainerEl(),t=this.getLayoutHTML();e.innerHTML=t,this.registerListeners()}destory(){this.removeListeners()}}const v=i=>new h(i);exports.PaginationBar=h;exports.createPaginationBar=v;
