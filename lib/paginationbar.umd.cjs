(function(s,r){typeof exports=="object"&&typeof module!="undefined"?r(exports):typeof define=="function"&&define.amd?define(["exports"],r):(s=typeof globalThis!="undefined"?globalThis:s||self,r(s.PaginationBar={}))})(this,function(s){"use strict";var d=Object.defineProperty;var v=(s,r,a)=>r in s?d(s,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[r]=a;var u=(s,r,a)=>(v(s,typeof r!="symbol"?r+"":r,a),a);var r=(i=>(i.getContainerElError="Can not find container elemet.",i))(r||{}),a=(i=>(i.containerClassName="pagination-bar-container",i.pagerWrapperClassName="pagination-bar__pager",i.pagerItemClassName="pagination-bar__pager__number",i.prevButtonClassName="pagination-bar__prev",i.nextButtonClassName="pagination-bar__next",i.totalClassName="pagination-bar__total",i))(a||{});function h(i,t){const e=typeof t=="string"?[t]:t;i.classList.add(...e)}const l='<svg xmlns="http://www.w3.org/2000/svg" width="1em" class="icon" viewBox="0 0 1024 1024" fill="#707070" style="--svg-origin-width:200;--svg-origin-height:200;--svg-origin-width--with-unit:200px;--svg-origin-height--with-unit:200px;" data-svg-origin-width="200" data-svg-origin-height="200" font-size="200"><path d="M650.721 191.69c-8.782 0-17.565 3.237-24.268 9.709L328.968 488.573c-13.408 12.933-13.408 33.923 0 46.856L626.454 822.6c13.408 12.944 35.13 12.944 48.538 0 13.409-12.932 13.409-33.923 0-46.855L401.775 512 674.99 248.253c13.409-12.932 13.409-33.923 0-46.855-6.704-6.471-15.486-9.708-24.269-9.707z"/></svg>',c='<svg xmlns="http://www.w3.org/2000/svg" width="1em" class="icon" viewBox="0 0 1024 1024" fill="#707070" style="--svg-origin-width:200;--svg-origin-height:200;--svg-origin-width--with-unit:200px;--svg-origin-height--with-unit:200px;" data-svg-origin-width="200" data-svg-origin-height="200" font-size="200"><path d="M372.68 191.69c8.782 0 17.565 3.237 24.269 9.709l297.484 287.175c13.408 12.933 13.408 33.923 0 46.856L396.948 822.602c-13.409 12.944-35.13 12.944-48.538 0-13.408-12.932-13.408-33.923 0-46.855l273.216-263.745L348.41 248.253c-13.408-12.932-13.408-33.923 0-46.855 6.704-6.471 15.487-9.708 24.269-9.707z"/></svg>',m='<svg xmlns="http://www.w3.org/2000/svg" width="1em" class="icon" viewBox="0 0 1024 1024" fill="#515151" style="--svg-origin-width:200;--svg-origin-height:200;--svg-origin-width--with-unit:200px;--svg-origin-height--with-unit:200px;" data-svg-origin-width="200" data-svg-origin-height="200" font-size="200"><path d="M197.031 417.342c-52.237 0-94.615 42.398-94.615 94.638 0 52.256 42.378 94.634 94.615 94.634 52.24 0 94.637-42.378 94.637-94.634 0-52.24-42.397-94.638-94.637-94.638zM512 417.342c-52.259 0-94.615 42.398-94.615 94.638 0 52.256 42.356 94.634 94.614 94.634 52.238 0 94.595-42.378 94.595-94.634 0-52.24-42.357-94.638-94.595-94.638zM826.926 417.342c-52.198 0-94.594 42.398-94.594 94.638 0 52.256 42.397 94.634 94.594 94.634 52.26 0 94.657-42.378 94.657-94.634 0-52.24-42.398-94.638-94.657-94.638z"/></svg>';class p{constructor(t){u(this,"options",{container:"#pagination-bar-container",pagerCount:7,currentPage:1,pageSize:10,total:0,layout:"prev,pager,next,total",onCurrentPageChange:()=>{},onPageSizeChange:()=>{}});this.options=Object.assign(this.options,t),this.pagerListener=this.pagerListener.bind(this),this.prevBtnListener=this.prevBtnListener.bind(this),this.nextBtnListener=this.nextBtnListener.bind(this),this.render()}setCurrentPage(t,e=!0){var n;this.options.currentPage=t,(n=this.options)==null||n.onCurrentPageChange(this.options.currentPage),e&&this.render()}setPageSize(t,e=!0){var n;this.options.pageSize=t,(n=this.options)==null||n.onPageSizeChange(this.options.pageSize),e&&this.render()}setTotal(t,e=!0){this.options.total=t||0,e&&this.render()}setOptions(t,e=!1){this.options=Object.assign(this.options,t),e&&this.render()}get pageCount(){return Math.ceil(this.options.total/this.options.pageSize)}get lastPageNumber(){return this.pageCount}get mainPagerCount(){const t=this.options.pagerCount-2;return t<=0?0:t}get mainPagerGap(){return Math.floor(this.mainPagerCount/2)}get mainPagerStart(){let t=this.mainPagerGap;const e=this.lastPageNumber-this.options.currentPage;e<=this.mainPagerGap&&(t+=this.mainPagerGap-e+1);const n=this.options.currentPage-t;return n<1?1:n}get mainPagerEnd(){let t=this.mainPagerCount%2===0?this.mainPagerGap-1:this.mainPagerGap;const e=this.options.currentPage-1;e<=this.mainPagerGap&&(t+=this.mainPagerGap-e+1);const n=this.options.currentPage+t;return n>this.pageCount?this.pageCount:n}get mainPager(){const t=[];for(let e=this.mainPagerStart;e<=this.mainPagerEnd;e++)t.push({pageNumber:e,type:"main"});return t}get leftPager(){const t=[],e=this.mainPager[0];return e&&e.pageNumber!==1&&(t.push({pageNumber:1,type:"first-page"}),this.pageCount>this.options.pagerCount&&typeof e.pageNumber=="number"&&e.pageNumber>2&&t.push({pageNumber:null,type:"prev-ellipsis"})),t}get rightPager(){const t=[],e=this.mainPager[this.mainPager.length-1];return e&&e.pageNumber!==this.pageCount&&(t.unshift({pageNumber:this.pageCount,type:"last-page"}),this.pageCount>this.options.pagerCount&&typeof e.pageNumber=="number"&&e.pageNumber<this.pageCount-1&&t.unshift({pageNumber:null,type:"next-ellipsis"})),t}get finalPager(){return this.leftPager.concat(this.mainPager,this.rightPager)}getLayout(){return typeof this.options.layout=="string"?this.options.layout.split(","):Array.isArray(this.options.layout)?this.options.layout:[]}getLayoutHTML(){return this.getLayout().reduce((t,e)=>(e==="pager"?t+=this.generatePager():e==="prev"?t+=this.generatePrev():e==="next"?t+=this.generateNext():e==="jumper"?t+=this.generateJumper():e==="total"?t+=this.generateTotal():e==="sizes"&&(t+=this.generateSizes()),t),"")}getContainerEl(){if(typeof this.options.container=="string"){const t=document.querySelector(this.options.container);if(!t)throw new Error(r.getContainerElError);return t}return this.options.container}isPagerNumberType(t){return t&&!["prev-ellipsis","next-ellipsis"].includes(t)}generatePager(){const t=this.finalPager.reduce((e,n)=>{const o=this.isPagerNumberType(n.type)?n.pageNumber:m,g=this.options.currentPage===n.pageNumber?"active":"",b=this.isPagerNumberType(n.type)?"pager-number":"pager-quick-btn";return e+=`<li class="${a.pagerItemClassName} ${g}" data-number="${n.pageNumber}" data-type="${n.type}" role="${b}">${o}</li>`,e},"");return`<ul class="${a.pagerWrapperClassName}">${t}</ul>`}generatePrev(){return`<button type="button" class="${a.prevButtonClassName}" role="prev-btn">${l}</button>`}generateNext(){return`<button type="button" class="${a.nextButtonClassName}" role="next-btn">${c}</button>`}generateSizes(){return""}generateJumper(){return""}generateTotal(){const t=`共 ${this.options.total} 条`;return`<span class="${a.totalClassName}">${t}</span>`}getPagerItemDataset(t){return t.dataset}pagerListener(t){const e=t.target;if(e.getAttribute("role")==="pager-number"){const o=this.getPagerItemDataset(e),g=Number(o.number);this.setCurrentPage(g)}}prevBtnListener(){this.options.currentPage>1&&this.setCurrentPage(this.options.currentPage-1)}nextBtnListener(){this.options.currentPage<this.lastPageNumber&&this.setCurrentPage(this.options.currentPage+1)}registerListeners(){var e,n;this.removeListeners();const t=this.getContainerEl();t.addEventListener("click",this.pagerListener),(e=t.querySelector('button[role="prev-btn"]'))==null||e.addEventListener("click",this.prevBtnListener),(n=t.querySelector('button[role="next-btn"]'))==null||n.addEventListener("click",this.nextBtnListener)}removeListeners(){var e,n;const t=this.getContainerEl();t.removeEventListener("click",this.pagerListener),(e=t.querySelector('button[role="prev-btn"]'))==null||e.removeEventListener("click",this.prevBtnListener),(n=t.querySelector('button[role="next-btn"]'))==null||n.removeEventListener("click",this.nextBtnListener)}render(){const t=this.getContainerEl();h(t,a.containerClassName);const e=this.getLayoutHTML();t.innerHTML=e,this.registerListeners()}destory(){this.removeListeners()}}const f="",P=i=>new p(i);s.PaginationBar=p,s.createPaginationBar=P,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
