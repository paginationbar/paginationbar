(function(a,r){typeof exports=="object"&&typeof module!="undefined"?r(exports):typeof define=="function"&&define.amd?define(["exports"],r):(a=typeof globalThis!="undefined"?globalThis:a||self,r(a.PaginationBar={}))})(this,function(a){"use strict";var P=Object.defineProperty;var f=(a,r,s)=>r in a?P(a,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[r]=s;var p=(a,r,s)=>(f(a,typeof r!="symbol"?r+"":r,s),s);var r=(n=>(n.getContainerElError="Can not find container elemet.",n))(r||{}),s=(n=>(n.containerClassName="pagination-bar-container",n.pagerWrapperClassName="pagination-bar__pager",n.pagerItemClassName="pagination-bar__pager__number",n.prevButtonClassName="pagination-bar__prev",n.nextButtonClassName="pagination-bar__next",n.totalClassName="pagination-bar__total",n.jumperClassName="pagination-bar__jumper",n.sizesClassName="pagination-bar__sizes",n))(s||{});function h(n,t){const e=typeof t=="string"?[t]:t;n.classList.add(...e)}const l='<svg xmlns="http://www.w3.org/2000/svg" width="1em" class="icon" viewBox="0 0 1024 1024" fill="#707070" style="--svg-origin-width:200;--svg-origin-height:200;--svg-origin-width--with-unit:200px;--svg-origin-height--with-unit:200px;" data-svg-origin-width="200" data-svg-origin-height="200" font-size="200"><path d="M650.721 191.69c-8.782 0-17.565 3.237-24.268 9.709L328.968 488.573c-13.408 12.933-13.408 33.923 0 46.856L626.454 822.6c13.408 12.944 35.13 12.944 48.538 0 13.409-12.932 13.409-33.923 0-46.855L401.775 512 674.99 248.253c13.409-12.932 13.409-33.923 0-46.855-6.704-6.471-15.486-9.708-24.269-9.707z"/></svg>',c='<svg xmlns="http://www.w3.org/2000/svg" width="1em" class="icon" viewBox="0 0 1024 1024" fill="#707070" style="--svg-origin-width:200;--svg-origin-height:200;--svg-origin-width--with-unit:200px;--svg-origin-height--with-unit:200px;" data-svg-origin-width="200" data-svg-origin-height="200" font-size="200"><path d="M372.68 191.69c8.782 0 17.565 3.237 24.269 9.709l297.484 287.175c13.408 12.933 13.408 33.923 0 46.856L396.948 822.602c-13.409 12.944-35.13 12.944-48.538 0-13.408-12.932-13.408-33.923 0-46.855l273.216-263.745L348.41 248.253c-13.408-12.932-13.408-33.923 0-46.855 6.704-6.471 15.487-9.708 24.269-9.707z"/></svg>',m='<svg xmlns="http://www.w3.org/2000/svg" width="1em" class="icon" viewBox="0 0 1024 1024" fill="#515151" style="--svg-origin-width:200;--svg-origin-height:200;--svg-origin-width--with-unit:200px;--svg-origin-height--with-unit:200px;" data-svg-origin-width="200" data-svg-origin-height="200" font-size="200"><path d="M197.031 417.342c-52.237 0-94.615 42.398-94.615 94.638 0 52.256 42.378 94.634 94.615 94.634 52.24 0 94.637-42.378 94.637-94.634 0-52.24-42.397-94.638-94.637-94.638zM512 417.342c-52.259 0-94.615 42.398-94.615 94.638 0 52.256 42.356 94.634 94.614 94.634 52.238 0 94.595-42.378 94.595-94.634 0-52.24-42.357-94.638-94.595-94.638zM826.926 417.342c-52.198 0-94.594 42.398-94.594 94.638 0 52.256 42.397 94.634 94.594 94.634 52.26 0 94.657-42.378 94.657-94.634 0-52.24-42.398-94.638-94.657-94.638z"/></svg>';class u{constructor(t){p(this,"options",{container:"#pagination-bar-container",firstPageNumber:1,pagerCount:7,currentPage:1,pageSize:10,total:0,layout:"prev,pager,next",prevText:"",nextText:"",jumperPrefixText:"Go to",jumperSuffixText:"",totalPrefixText:"Total",totalSuffixText:"",onCurrentPageChange:()=>{},onPageSizeChange:()=>{}});p(this,"currentJumpNumber","");this.options=Object.assign(this.options,t),this.pagerListener=this.pagerListener.bind(this),this.prevBtnListener=this.prevBtnListener.bind(this),this.nextBtnListener=this.nextBtnListener.bind(this),this.jumperListener=this.jumperListener.bind(this),this.render()}setCurrentPage(t,e=!0){var o;let i=t;return i<this.options.firstPageNumber?i=this.options.firstPageNumber:i>this.lastPageNumber&&(i=this.lastPageNumber),this.options.currentPage=i,(o=this.options)==null||o.onCurrentPageChange(this.options.currentPage),e&&this.render(),i}setPageSize(t,e=!0){var i;this.options.pageSize=t,(i=this.options)==null||i.onPageSizeChange(this.options.pageSize),e&&this.render()}setTotal(t,e=!0){this.options.total=t||0,e&&this.render()}setOptions(t,e=!1){this.options=Object.assign(this.options,t),e&&this.render()}get pageCount(){return Math.ceil(this.options.total/this.options.pageSize)}get lastPageNumber(){return this.pageCount}get mainPagerCount(){const t=this.options.pagerCount-2;return t<=0?0:t}get mainPagerGap(){return Math.floor(this.mainPagerCount/2)}get mainPagerStart(){let t=this.mainPagerGap;const e=this.lastPageNumber-this.options.currentPage;e<=this.mainPagerGap&&(t+=this.mainPagerGap-e+1);const i=this.options.currentPage-t;return i<this.options.firstPageNumber?this.options.firstPageNumber:i}get mainPagerEnd(){let t=this.mainPagerCount%2===0?this.mainPagerGap-1:this.mainPagerGap;const e=this.options.currentPage-1;e<=this.mainPagerGap&&(t+=this.mainPagerGap-e+1);const i=this.options.currentPage+t;return i>this.pageCount?this.pageCount:i}get mainPager(){const t=[];for(let e=this.mainPagerStart;e<=this.mainPagerEnd;e++)t.push({pageNumber:e,type:"main"});return t}get leftPager(){const t=[],e=this.mainPager[0];return e&&e.pageNumber!==this.options.firstPageNumber&&(t.push({pageNumber:this.options.firstPageNumber,type:"first-page"}),this.pageCount>this.options.pagerCount&&typeof e.pageNumber=="number"&&e.pageNumber>2&&t.push({pageNumber:null,type:"prev-ellipsis"})),t}get rightPager(){const t=[],e=this.mainPager[this.mainPager.length-1];return e&&e.pageNumber!==this.pageCount&&(t.unshift({pageNumber:this.pageCount,type:"last-page"}),this.pageCount>this.options.pagerCount&&typeof e.pageNumber=="number"&&e.pageNumber<this.pageCount-1&&t.unshift({pageNumber:null,type:"next-ellipsis"})),t}get finalPager(){return this.leftPager.concat(this.mainPager,this.rightPager)}getLayout(){return typeof this.options.layout=="string"?this.options.layout.split(",").map(t=>t.trim()):Array.isArray(this.options.layout)?this.options.layout:[]}getLayoutHTML(){return this.getLayout().reduce((t,e)=>(e==="pager"?t+=this.generatePager():e==="prev"?t+=this.generatePrev():e==="next"?t+=this.generateNext():e==="jumper"?t+=this.generateJumper():e==="total"?t+=this.generateTotal():e==="sizes"&&(t+=this.generateSizes()),t),"")}getContainerEl(){if(typeof this.options.container=="string"){const t=document.querySelector(this.options.container);if(!t)throw new Error(r.getContainerElError);return t}return this.options.container}isPagerNumberType(t){return t&&!["prev-ellipsis","next-ellipsis"].includes(t)}generatePager(){const t=this.finalPager.reduce((e,i)=>{const o=this.isPagerNumberType(i.type)?i.pageNumber:m,g=this.options.currentPage===i.pageNumber?"active":"",d=this.isPagerNumberType(i.type)?"pager-number":"pager-quick-btn";return e+=`<li class="${s.pagerItemClassName} ${g}" data-number="${i.pageNumber}" data-type="${i.type}" role="${d}">${o}</li>`,e},"");return`<ul class="${s.pagerWrapperClassName}">${t}</ul>`}generatePrev(){const t=this.options.currentPage<=this.options.firstPageNumber?'disabled="disabled"':"",e=t?"disabled":"",i=this.options.prevText?this.options.prevText:l;return`<button type="button" class="${s.prevButtonClassName} ${e}" ${t} role="prev-btn">${i}</button>`}generateNext(){const t=this.options.currentPage>=this.lastPageNumber?'disabled="disabled"':"",e=t?"disabled":"",i=this.options.nextText?this.options.nextText:c;return`<button type="button" class="${s.nextButtonClassName} ${e}" ${t} role="next-btn">${i}</button>`}generateSizes(){return`<div class="${s.sizesClassName}"></div>`}generateJumper(){return`<div class="${s.jumperClassName}">
      <span>${this.options.jumperPrefixText}</span>
      <div class="pagination-bar__jumper__input">
        <input type="number" value="${this.currentJumpNumber}"  autocomplete="off" min="${this.options.firstPageNumber}" max="${this.lastPageNumber}" class="pagination-bar__jumper__input-inner" />
      </div>
      <span>${this.options.jumperSuffixText}</span>
    </div>`}generateTotal(){const t=`${this.options.totalPrefixText} ${this.options.total} ${this.options.totalSuffixText}`.trim();return`<span class="${s.totalClassName}">${t}</span>`}getPagerItemDataset(t){return t.dataset}pagerListener(t){const e=t.target;if(e.getAttribute("role")==="pager-number"){const o=this.getPagerItemDataset(e),g=Number(o.number);this.setCurrentPage(g)}}prevBtnListener(){this.options.currentPage>1&&this.setCurrentPage(this.options.currentPage-1)}nextBtnListener(){this.options.currentPage<this.lastPageNumber&&this.setCurrentPage(this.options.currentPage+1)}jumperListener(t){const e=t.target;if(!e.value){this.currentJumpNumber="";return}this.currentJumpNumber=this.setCurrentPage(Number(e.value),!1),this.render()}registerListeners(){var e,i,o;this.removeListeners();const t=this.getContainerEl();t.addEventListener("click",this.pagerListener),(e=t.querySelector('button[role="prev-btn"]'))==null||e.addEventListener("click",this.prevBtnListener),(i=t.querySelector('button[role="next-btn"]'))==null||i.addEventListener("click",this.nextBtnListener),(o=t.querySelector(".pagination-bar__jumper__input-inner"))==null||o.addEventListener("change",this.jumperListener)}removeListeners(){var e,i;const t=this.getContainerEl();t.removeEventListener("click",this.pagerListener),(e=t.querySelector('button[role="prev-btn"]'))==null||e.removeEventListener("click",this.prevBtnListener),(i=t.querySelector('button[role="next-btn"]'))==null||i.removeEventListener("click",this.nextBtnListener)}render(){const t=this.getContainerEl();h(t,s.containerClassName);const e=this.getLayoutHTML();t.innerHTML=e,this.registerListeners()}destory(){this.removeListeners()}}const b=n=>new u(n),v="";a.PaginationBar=u,a.createPaginationBar=b,Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});
